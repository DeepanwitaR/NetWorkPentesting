#making a terrible port scanner. no of ports open for a part target.

import sys
import socket
from datetime import datetime

#define a target.
#python portscanner.py <ip>

if len(sys.argv)==2:
	target = socket.gethostbyname(sys.argv[1]) #sys.argv[0] is name of the script.
	print ("the target generated is:	" + str(target)) #hangs for letters.
else:
	print "invalid amount of arguments"
	sys.exit() #shut prog. and not hang it.

#add a pretty banner:
print ("scanning target: "+str(target))
print ("time started: "+ str(datetime.now()))

try:
	for port in range(50,85):
		s= socket.socket(socket.AF_INET, socket.SOCK_STREAM)
		socket.setdefaulttimeout(1) #float
		result = s.connect_ex((target, port)) #returns error indicator.
		print ("checking the port no. : {}".format(port))
		if result == 0:
			print ("port {} is open ".format(port))
		s.close()
except KeyboardInterrupt:
	print "exiting program on key interupt"
	sys.exit()

except socket.gaierror:
	print "exiting as hostname couldnt be resolved."
	sys.exit()

except socket.error:
	print "could not connet to server"
	sys.exit()

